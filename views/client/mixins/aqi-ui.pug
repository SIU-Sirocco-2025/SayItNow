//- AQI UI mixins – structure-only; data is filled by client JS

mixin aqiStatusbar()
  .aqi-statusbar.card.border-0.mb-3
    .card-body.d-flex.align-items-center.justify-content-between.flex-wrap.gap-3
      .d-flex.align-items-center.gap-3
        i.bi.bi-shield-exclamation.display-6.opacity-75
        .status-copy
          h3.h5.mb-1#aqi-status-text Trạng thái chất lượng không khí
          p.small.mb-0.text-muted#aqi-status-sub Cập nhật từ các trạm mới nhất.
      .d-flex.align-items-center.gap-3.flex-wrap
        .d-flex.align-items-center.gap-2
          span.badge.bg-light.text-body.secondary-label Trung bình
          span.fw-bold.fs-5#aqi-avg --
        .vr.d-none.d-md-block
        .d-flex.align-items-center.gap-2
          span.badge.bg-light.text-body.secondary-label Cao nhất
          span.fw-bold#aqi-max --
        .d-flex.align-items-center.gap-2
          span.badge.bg-light.text-body.secondary-label Thấp nhất
          span.fw-bold#aqi-min --

mixin aqiLegendInline()
  .aqi-legend.card.border-0.shadow-sm.small.mb-3
    .card-body.d-flex.align-items-center.flex-wrap.gap-3
      .me-1.fw-semibold AQI
      -
        const aqiLegendItems = [
          { c:'#2ecc71', t:'0-50 Tốt' },
          { c:'#f1c40f', t:'51-100 Trung bình' },
          { c:'#e67e22', t:'101-200 Xấu/Nhạy cảm' },
          { c:'#8e44ad', t:'201-300 Rất xấu' },
          { c:'#e74c3c', t:'300+ Nguy hại' }
        ];
      each item in aqiLegendItems
        .d-inline-flex.align-items-center.gap-2
          span(style=`display:inline-block;width:12px;height:12px;border-radius:2px;background:${item.c}`)
          span= item.t

mixin aqiMapControls()
  .aqi-map-controls.card.border-0.shadow-sm.mb-3
    .card-body.d-flex.align-items-center.flex-wrap.gap-3
      .btn-group(role='group', aria-label='Toggle map layers')
        button.btn.btn-sm.btn-outline-primary.active(type='button', data-layer-toggle='heat')
          i.bi.bi-fire.me-1
          | Bản đồ nhiệt
        button.btn.btn-sm.btn-outline-primary.active(type='button', data-layer-toggle='markers')
          i.bi.bi-geo-alt.me-1
          | Điểm trạm
      .btn-group(role='group', aria-label='Base map styles')
        button.btn.btn-sm.btn-outline-secondary.active(type='button', data-map-style='Carto Light') Sáng
        button.btn.btn-sm.btn-outline-secondary(type='button', data-map-style='Dark Matter') Tối
        button.btn.btn-sm.btn-outline-secondary(type='button', data-map-style='OpenStreetMap') Cổ điển
      button.btn.btn-sm.btn-outline-success(type='button', data-map-action='locate')
        i.bi.bi-crosshair.me-1
        | Vị trí của tôi

mixin aqiMapCard()
  .aqi-map-card.card.border-0.shadow-sm
    .card-body
      #aqi-map(style='width:100%;height:520px;border-radius:12px;overflow:hidden;')
      p.small.text-muted.mt-2
        | Nền bản đồ từ OpenStreetMap/Carto. Vùng màu thể hiện mức độ AQI từ các trạm.

mixin aqiStationGrid()
  .aqi-stations.mt-4
    .d-flex.justify-content-between.align-items-end.flex-wrap.gap-2.mb-3
      h2.h5.mb-0 Chi tiết các trạm
      span.text-muted.small(data-stations-updated) --
    #aqi-city-hero.mb-3
    #city-hour-details.d-none.mb-3
    .row.row-cols-1.row-cols-md-2.g-3#aqi-stations
      .col.text-center.text-muted.py-4(data-empty-state)
        | Đang tải dữ liệu AQI...
