//- AQI UI mixins ‚Äì structure-only; data is filled by client JS

mixin aqiStatusbar()
  .aqi-statusbar.card.border-0.mb-3
    .card-body.d-flex.align-items-center.justify-content-between.flex-wrap.gap-3
      .d-flex.align-items-center.gap-3
        i.bi.bi-shield-exclamation.display-6.opacity-75
        .status-copy
          h3.h5.mb-1#aqi-status-text Tr·∫°ng th√°i ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠
          p.small.mb-0.text-muted#aqi-status-sub C·∫≠p nh·∫≠t t·ª´ c√°c tr·∫°m m·ªõi nh·∫•t.
      .d-flex.align-items-center.gap-3.flex-wrap
        .d-flex.align-items-center.gap-2
          span.badge.bg-light.text-body.secondary-label Trung b√¨nh
          span.fw-bold.fs-5#aqi-avg --
        .vr.d-none.d-md-block
        .d-flex.align-items-center.gap-2
          span.badge.bg-light.text-body.secondary-label Cao nh·∫•t
          span.fw-bold#aqi-max --
        .d-flex.align-items-center.gap-2
          span.badge.bg-light.text-body.secondary-label Th·∫•p nh·∫•t
          span.fw-bold#aqi-min --

mixin aqiLegendInline()
  .aqi-legend.card.border-0.shadow-sm.small.mb-3
    .card-body.d-flex.align-items-center.flex-wrap.gap-3
      .me-1.fw-semibold AQI
      -
        const aqiLegendItems = [
          { c:'#1a9e3e', t:'0-50 T·ªët' },
          { c:'#95d500', t:'51-100 Trung b√¨nh' },
          { c:'#f1c40f', t:'101-150 Nh·∫°y c·∫£m' },
          { c:'#e67e22', t:'151-200 X·∫•u' },
          { c:'#ff8c00', t:'201-300 R·∫•t x·∫•u' },
          { c:'#d41e3a', t:'300+ Nguy h·∫°i' }
        ];
      each item in aqiLegendItems
        .d-inline-flex.align-items-center.gap-2
          span(style=`display:inline-block;width:12px;height:12px;border-radius:2px;background:${item.c}`)
          span= item.t

mixin aqiMapControls()
  .aqi-map-controls.card.border-0.shadow-sm.mb-3
    .card-body.d-flex.align-items-center.flex-wrap.gap-3
      .btn-group(role='group', aria-label='Toggle map layers')
        button.btn.btn-sm.btn-outline-primary.active(type='button', data-layer-toggle='voronoi')
          i.bi.bi-map.me-1
          | B·∫£n ƒë·ªì v√πng AQI
        button.btn.btn-sm.btn-outline-primary.active(type='button', data-layer-toggle='markers')
          i.bi.bi-geo-alt.me-1
          | ƒêi·ªÉm tr·∫°m
      .btn-group(role='group', aria-label='Base map styles')
        button.btn.btn-sm.btn-outline-secondary.active(type='button', data-map-style='Carto Light') S√°ng
        button.btn.btn-sm.btn-outline-secondary(type='button', data-map-style='Dark Matter') T·ªëi
        button.btn.btn-sm.btn-outline-secondary(type='button', data-map-style='OpenStreetMap') C·ªï ƒëi·ªÉn
      button.btn.btn-sm.btn-outline-success(type='button', data-map-action='locate')
        i.bi.bi-crosshair.me-1
        | V·ªã tr√≠ c·ªßa t√¥i

mixin aqiMapCard()
  .aqi-map-card.card.border-0.shadow-sm
    .card-body
      #aqi-map(style='width:100%;height:520px;border-radius:12px;overflow:hidden;')
      p.small.text-muted.mt-2
        | N·ªÅn b·∫£n ƒë·ªì t·ª´ OpenStreetMap/Carto. V√πng m√†u th·ªÉ hi·ªán m·ª©c ƒë·ªô AQI t·ª´ c√°c tr·∫°m.

mixin aqiStationGrid()
  .aqi-stations.mt-4
    .d-flex.justify-content-between.align-items-end.flex-wrap.gap-2.mb-3
      h2.h5.mb-0 Chi ti·∫øt c√°c tr·∫°m
      span.text-muted.small(data-stations-updated) --
    #aqi-city-hero.mb-3
    #city-hour-details.d-none.mb-3
    .row.row-cols-1.row-cols-md-2.g-3#aqi-stations
      .col.text-center.text-muted.py-4(data-empty-state)
        | ƒêang t·∫£i d·ªØ li·ªáu AQI...

mixin aqiRecommendations()
  .aqi-recommendations.card.border-0.shadow-sm
    .card-body
      h5.card-title.d-flex.align-items-center.gap-2.mb-3
        i.bi.bi-info-circle.text-info
        | Khuy·∫øn ngh·ªã
      
      select#station-selector.form-select.form-select-sm
        option(value='nearest' selected) üéØ ƒêang t·∫£i danh s√°ch tr·∫°m...
      
      //- Card hi·ªÉn th·ªã AQI c·ª• th·ªÉ
      #station-aqi-card.mt-3.mb-3
      
      //- Nh√≥m khuy·∫øn ngh·ªã
      .aqi-advice-group.mb-3.p-3.rounded.bg-success-subtle(id='advice-good' data-advice-group='good' style='display:none;')
        h6.fw-bold.text-success.mb-2.mt-2
          | AQI 0-50: T·ªët
        ul.small.mb-0
          li B·∫°n c√≥ th·ªÉ sinh ho·∫°t ngo√†i tr·ªùi b√¨nh th∆∞·ªùng
          li Th√≠ch h·ª£p cho c√°c ho·∫°t ƒë·ªông th·ªÉ d·ª•c ngo√†i tr·ªùi
          li Kh√¥ng c·∫ßn b·∫£o v·ªá ƒë·∫∑c bi·ªát

      .aqi-advice-group.mb-3.p-3.rounded(id='advice-moderate' data-advice-group='moderate' style='display:none;border-left:4px solid #95d500;background-color:rgba(149,213,0,0.1);')
        h6.fw-bold.mb-2.mt-2(style='color:#95d500;')
          | AQI 51-100: Trung b√¨nh
        ul.small.mb-0
          li Ng∆∞·ªùi nh·∫°y c·∫£m n√™n gi·∫£m th·ªùi gian ho·∫°t ƒë·ªông ngo√†i tr·ªùi
          li Nh·ªØng ng∆∞·ªùi kh·ªèe m·∫°nh v·∫´n c√≥ th·ªÉ sinh ho·∫°t b√¨nh th∆∞·ªùng
          li Xem x√©t s·ª≠ d·ª•ng kh·∫©u trang n·∫øu c√≥ d·∫•u hi·ªáu kh√≥ ch·ªãu

      .aqi-advice-group.mb-3.p-3.rounded(id='advice-unhealthy-for-sensitive' data-advice-group='unhealthy-for-sensitive' style='display:none;border-left:4px solid #f1c40f;background-color:rgba(241,196,15,0.1);')
        h6.fw-bold.mb-2.mt-2(style='color:#f1c40f;')
          | AQI 101-150: Nh·∫°y c·∫£m
        ul.small.mb-0
          li Ng∆∞·ªùi nh·∫°y c·∫£m n√™n h·∫°n ch·∫ø v·∫≠n ƒë·ªông m·∫°nh ngo√†i tr·ªùi
          li Nh√≥m nh·∫°y c·∫£m n√™n gi·∫£m th·ªùi gian ho·∫°t ƒë·ªông ngo√†i tr·ªùi
          li Xem x√©t s·ª≠ d·ª•ng kh·∫©u trang n·∫øu c·∫ßn ra ngo√†i

      .aqi-advice-group.mb-3.p-3.rounded(id='advice-unhealthy' data-advice-group='unhealthy' style='display:none;border-left:4px solid #e67e22;background-color:rgba(230,126,34,0.1);')
        h6.fw-bold.mb-2.mt-2(style='color:#e67e22;')
          | AQI 151-200: X·∫•u
        ul.small.mb-0
          li C·∫ßn th·∫≠n tr·ªçng: gi·∫£m ho·∫°t ƒë·ªông m·∫°nh ngo√†i tr·ªùi
          li N√™n ƒëeo kh·∫©u trang ph√π h·ª£p (N95/KN95) n·∫øu ra ngo√†i
          li Ng∆∞·ªùi nh·∫°y c·∫£m (tr·∫ª em, ng∆∞·ªùi gi√†, b·ªánh nh√¢n) n√™n ·ªü trong nh√†
          li TƒÉng c∆∞·ªùng s·ª≠ d·ª•ng m√°y l·ªçc kh√¥ng kh√≠

      .aqi-advice-group.mb-3.p-3.rounded(id='advice-very-unhealthy' data-advice-group='very-unhealthy' style='display:none;border-left:4px solid #ff8c00;background-color:rgba(255,140,0,0.1);')
        h6.fw-bold.mb-2.mt-2(style='color:#ff8c00;')
          | AQI 201-300: R·∫•t x·∫•u
        ul.small.mb-0
          li H·∫°n ch·∫ø ra ngo√†i n·∫øu kh√¥ng c·∫ßn thi·∫øt
          li Nh·ªØng ng∆∞·ªùi ngo√†i nh√≥m nh·∫°y c·∫£m c≈©ng n√™n gi·∫£m ho·∫°t ƒë·ªông
          li B·∫Øt bu·ªôc ƒëeo kh·∫©u trang ph√π h·ª£p n·∫øu ra ngo√†i
          li S·ª≠ d·ª•ng m√°y l·ªçc kh√¥ng kh√≠ trong nh√†
          li ƒê√≥ng c·ª≠a s·ªï ƒë·ªÉ gi·∫£m kh√¥ng kh√≠ ngo√†i v√†o

      .aqi-advice-group.mb-3.p-3.rounded(id='advice-hazardous' data-advice-group='hazardous' style='display:none;border-left:4px solid #d41e3a;background-color:rgba(212,30,58,0.1);')
        h6.fw-bold.mb-2.mt-2(style='color:#d41e3a;')
          | AQI 300+: Nguy h·∫°i
        ul.small.mb-0
          li N√™n ·ªü trong nh√† v√† gi·∫£m c√°c ho·∫°t ƒë·ªông ngo√†i tr·ªùi
          li S·ª≠ d·ª•ng thi·∫øt b·ªã l·ªçc kh√¥ng kh√≠, m√°y t·∫°o oxy n·∫øu c√≥
          li B·∫Øt bu·ªôc ƒëeo kh·∫©u trang ch·∫•t l∆∞·ª£ng cao khi ra ngo√†i
          li Nh·ªØng ng∆∞·ªùi b·ªánh tim, ph·ªïi c·∫ßn tr√°nh ho·∫°t ƒë·ªông ngo√†i
          li Theo d√µi t√¨nh tr·∫°ng s·ª©c kh·ªèe, g·ªçi t∆∞ v·∫•n b√°c sƒ© n·∫øu c·∫ßn
